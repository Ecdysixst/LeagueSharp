using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using LeagueSharp;
using LeagueSharp.Math;
using System.Drawing;
using System.Windows.Input;

namespace TF
{
    class Program
    {
        static void Main(string[] args)
        {
            GameMode gamemode = GameMode.Connecting;

            while (gamemode != GameMode.Running)
            {
                gamemode = Game.Mode;
            }

            if (ObjectManager.Player.BaseSkinName == "TwistedFate")
            {
                Game.OnGameUpdate += Game_OnGameUpdate;

                Game.PrintChat(">> TF by Andyi loaded <<");
            }
        }

        private static int lastW;

        static void Game_OnGameUpdate(EventArgs args)
        {
            if (MenuGUI.IsChatOpen == false && (Keyboard.IsKeyDown(Key.E) || Keyboard.IsKeyDown(Key.T) || Keyboard.IsKeyDown(Key.G)))
            {
                if (ObjectManager.Player.Spellbook.CanUseSpell(SpellSlot.W) == SpellState.Ready)
                {
                    if (ObjectManager.Player.Spellbook.GetSpell(SpellSlot.W).Name == "PickACard" && Environment.TickCount > lastW + 3000)
                    {
                        ObjectManager.Player.Spellbook.CastSpell(SpellSlot.W);
                        lastW = Environment.TickCount;
                    }
                    if (Keyboard.IsKeyDown(Key.E))
                    {
                        if (ObjectManager.Player.Spellbook.GetSpell(SpellSlot.W).Name == "bluecardlock")
                        {
                            ObjectManager.Player.Spellbook.CastSpell(SpellSlot.W);
                        }
                    }
                    if (Keyboard.IsKeyDown(Key.T))
                    {
                        if (ObjectManager.Player.Spellbook.GetSpell(SpellSlot.W).Name == "goldcardlock")
                        {
                            ObjectManager.Player.Spellbook.CastSpell(SpellSlot.W);
                        }
                    }
                    if (Keyboard.IsKeyDown(Key.G))
                    {
                        if (ObjectManager.Player.Spellbook.GetSpell(SpellSlot.W).Name == "redcardlock")
                        {
                            ObjectManager.Player.Spellbook.CastSpell(SpellSlot.W);
                        }
                    }
                }
            }
        }
    }
}
